-- Challengers Katarina

assert(load(Base64Decode(
"LS1bWw0KCUNoYWxsZW5nZXJzIEthdGFyaW5hIHYxLjAgYnkgQ2hhbGxlbmdlcnMNCgk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCg0KCUNoYW5nZWxvZyENCglWZXJzaW9uOiAxLjENCgkJQWRkZWQgV2FyZCBKdW1wIChDcmVkaXRzIHRvIE5pbnRlbmRvKQ0KDQoJVmVyc2lvbjogMS4wDQoJCSogQ29zdG9taXphYmxlIEtleSBTZXR0aW5ncy4NCgkJKiBDb3N0b21pemFibGUgSGFyYXNzLCB1c2UgUSwgVywgRS4NCgkJKiBDdXN0b21pemFibGUgRnVsbCBjb21iby4gY2hhbmdlICJRRVdSIiwgIkVRV1IuDQoJCSogQ3VzdG9taXphYmxlIEtTIHNldHRpbmdzIHVzaW5nIHNraWxscyBhbmQgaWduaXRlLg0KCQkqIEN1c3RvbWl6YWJsZSBmYXJtIHdpdGggUSwgVy4NCl1dLS0gDQoNCmlmIG15SGVyby5jaGFyTmFtZSB+PSAiS2F0YXJpbmEiIHRoZW4gcmV0dXJuIGVuZA0KDQotLSBJbmZvDQpsb2NhbCB2ZXJzaW9uID0gMS4xDQoNCi0tIFVsdCBIZWxwZXINCmxvY2FsIGFuaW1hdGlvblIgPSAiIg0KbG9jYWwgdXNpbmdSID0gZmFsc2UNCmxvY2FsIHRpbWVSID0gMA0KDQotLSBSYW5nZXMNCmxvY2FsIHdSYW5nZSA9IDM3NQ0KbG9jYWwgZVJhbmdlID0gNzAwDQpsb2NhbCBxUmFuZ2UgPSA2NzUNCmxvY2FsIHJSYW5nZSA9IDU1MA0KDQotLSBJZ25pdGUNCmxvY2FsIGlnbml0ZSA9IG5pbA0KbG9jYWwgaWduaXRlRE1HID0gMA0KDQotLSBXYXJkIEp1bXAgYnkgTmludGVuZG8NCmxvY2FsIGxhc3RKdW1wID0gMA0KbG9jYWwgd2FyZHMgPSB7DQoJU2lnaHRTdG9uZSA9ICJpdGVtZ2hvc3R3YXJkIiwNCglTaWdodFdhcmQgPSAic2lnaHR3YXJkIiwNCglWaXNpb25XYXJkID0gInZpc2lvbndhcmQiLA0KCVRyaW5rZXQxID0gInRyaW5rZXR0b3RlbWx2bDEiLA0KCVRyaW5rZXQyID0gInRyaW5rZXR0b3RlbWx2bDIiLA0KCVRyaW5rZXQzID0gInRyaW5rZXR0b3RlbWx2bDMiLA0KCVRyaW5rZXQ0ID0gInRyaW5rZXR0b3RlbWx2bDNiIg0KfQ0KDQoNCi0tIENoZWNrcw0KbG9jYWwgUVJFQURZID0gZmFsc2UNCmxvY2FsIFdSRUFEWSA9IGZhbHNlDQpsb2NhbCBFUkVBRFkgPSBmYWxzZQ0KbG9jYWwgUlJFQURZID0gZmFsc2UNCmxvY2FsIElSRUFEWSA9IGZhbHNlDQoNCmxvY2FsIFVQREFURV9IT1NUID0gInJhdy5naXRodWJ1c2VyY29udGVudC5jb20iDQpsb2NhbCBVUERBVEVfUEFUSCA9ICIvYm9sY2hhbGxlbmdlcnMvYm9sL21hc3Rlci9zY3JpcHRzL0NoYWxsZW5nZXJzX0thdGFyaW5hLmx1YSIuLiI/cmFuZD0iLi5tYXRoLnJhbmRvbSgxLDEwMDAwKQ0KbG9jYWwgVVBEQVRFX0ZJTEVfUEFUSCA9IFNDUklQVF9QQVRIIC4uIEdldEN1cnJlbnRFbnYoKS5GSUxFX05BTUUNCmxvY2FsIFVQREFURV9VUkwgPSAiaHR0cHM6Ly8iLi5VUERBVEVfSE9TVC4uVVBEQVRFX1BBVEgNCg0KZnVuY3Rpb24gQXV0b3VwZGF0ZXJNc2cobXNnKQ0KCXByaW50KCI8Zm9udCBjb2xvcj1cIiM2Njk5ZmZcIj48Yj5DaGFsbGVuZ2VycyBLYXRhcmluYTo8L2I+PC9mb250PiA8Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4iLi5tc2cuLiIuPC9mb250PiIpDQplbmQNCg0KbG9jYWwgU2VydmVyRGF0YSA9IEdldFdlYlJlc3VsdChVUERBVEVfSE9TVCwgIi9ib2xjaGFsbGVuZ2Vycy9ib2wvbWFzdGVyL3NjcmlwdHMvQ2hhbGxlbmdlcnNfS2F0YXJpbmEudmVyc2lvbiIpDQoNCmlmIFNlcnZlckRhdGEgdGhlbg0KCVNlcnZlclZlcnNpb24gPSB0eXBlKHRvbnVtYmVyKFNlcnZlckRhdGEpKSA9PSAibnVtYmVyIiBhbmQgdG9udW1iZXIoU2VydmVyRGF0YSkgb3IgbmlsDQoJaWYgU2VydmVyVmVyc2lvbiB0aGVuDQoJCWlmIHRvbnVtYmVyKHZlcnNpb24pIDwgU2VydmVyVmVyc2lvbiB0aGVuDQoJCQlBdXRvdXBkYXRlck1zZygiTmV3IHZlcnNpb24gYXZhaWxhYmxlICgiLi5TZXJ2ZXJWZXJzaW9uLi4iKSIpDQoJCQlBdXRvdXBkYXRlck1zZygiVXBkYXRpbmcsIHBsZWFzZSBkb24ndCBwcmVzcyBGOSIpDQoJCQlEZWxheUFjdGlvbihmdW5jdGlvbigpIERvd25sb2FkRmlsZShVUERBVEVfVVJMLCBVUERBVEVfRklMRV9QQVRILCBmdW5jdGlvbiAoKSBBdXRvdXBkYXRlck1zZygiU3VjY2Vzc2Z1bGx5IHVwZGF0ZWQuICgiLi52ZXJzaW9uLi4iID0+ICIuLlNlcnZlclZlcnNpb24uLiIpLCBwcmVzcyBGOSB0d2ljZSB0byBsb2FkIHRoZSB1cGRhdGVkIHZlcnNpb24uIikgZW5kKSBlbmQsIDMpDQoJCWVsc2UNCgkJCUF1dG91cGRhdGVyTXNnKCJZb3UgaGF2ZSBnb3QgdGhlIGxhdGVzdCB2ZXJzaW9uICgiLi5TZXJ2ZXJWZXJzaW9uLi4iKSIpDQoJCWVuZA0KCWVuZA0KZWxzZQ0KCUF1dG91cGRhdGVyTXNnKCJFcnJvciBkb3dubG9hZGluZyB2ZXJzaW9uIGluZm8iKQ0KZW5kDQoNCmZ1bmN0aW9uIE9uTG9hZCgpDQoJLS0gTG9hZCBNZW51DQoJTWVudSA9IHNjcmlwdENvbmZpZygiQ2hhbGxlbmdlcnMgS2F0YXJpbmEiLCAiS2F0YXJpbmEiKQ0KDQoJTWVudTphZGRTdWJNZW51KCJbIi4ubXlIZXJvLmNoYXJOYW1lLi4iXSAtIEtleSBTZXR0aW5ncyIsICJLZXlzIikNCgkJTWVudS5LZXlzOmFkZFBhcmFtKCJjb21ib0tleSIsICJDb21ibyBrZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgMzIpDQoJCU1lbnUuS2V5czphZGRQYXJhbSgiaGFyYXNzS2V5IiwgIkhhcmFzcyBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIk0iKSkNCgkJTWVudS5LZXlzOmFkZFBhcmFtKCJmYXJtS2V5IiwgIkZhcm0gT24vT2ZmIiwgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIk4iKSkNCg0KCU1lbnU6YWRkU3ViTWVudSgiWyIuLm15SGVyby5jaGFyTmFtZS4uIl0gLSBIYXJhc3MgU2V0dGluZ3MiLCAiSGFyYXMiKQ0KCQlNZW51LkhhcmFzOmFkZFBhcmFtKCJ1c2VRSGFyYXNzIiwgIlVzZSAoUSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCU1lbnUuSGFyYXM6YWRkUGFyYW0oInVzZVdIYXJhc3MiLCAiVXNlIChXKSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkgDQoJCU1lbnUuSGFyYXM6YWRkUGFyYW0oInVzZUVIYXJhc3MiLCAiVXNlIChFKSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCg0KCU1lbnU6YWRkU3ViTWVudSgiWyIuLm15SGVyby5jaGFyTmFtZS4uIl0gLSBDb21ibyBTZXR0aW5ncyIsICJDb21ibyIpDQoJCU1lbnUuQ29tYm86YWRkUGFyYW0oInVzZVEiLCAiVXNlIChRKSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJTWVudS5Db21ibzphZGRQYXJhbSgidXNlVyIsICJVc2UgKFcpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKSANCgkJTWVudS5Db21ibzphZGRQYXJhbSgidXNlRSIsICJVc2UgKEUpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlNZW51LkNvbWJvOmFkZFBhcmFtKCJzcGFjZXIiLCAiLS0tLS0tLS0tLSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJCU1lbnUuQ29tYm86YWRkU3ViTWVudSgiWyIuLm15SGVyby5jaGFyTmFtZS4uIl0gLSBVbHRpbWF0ZSBTZXR0aW5ncyIsICJ1bHRpbWF0ZSIpIA0KCQkJTWVudS5Db21iby51bHRpbWF0ZTphZGRQYXJhbSgidXNlUiIsICJVc2UgKFIpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJTWVudS5Db21iby51bHRpbWF0ZTphZGRQYXJhbSgidWx0TW9kZSIsICJVbHRpbWF0ZSBNb2RlIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDIsIHsiUUVXUiIsICJFUVdSIn0pDQoNCglNZW51OmFkZFN1Yk1lbnUoIlsiLi5teUhlcm8uY2hhck5hbWUuLiJdIC0gS1MgU2V0dGluZ3MiLCAiS1MiKQ0KCQlNZW51LktTOmFkZFBhcmFtKCJrc1dpdGhRIiwgIktTIHdpdGggUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJTWVudS5LUzphZGRQYXJhbSgia3NXaXRoVyIsICJLUyB3aXRoIFciLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCU1lbnUuS1M6YWRkUGFyYW0oImtzV2l0aEUiLCAiS1Mgd2l0aCBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlNZW51LktTOmFkZFBhcmFtKCJrc1dpdGhJZ25pdGUiLCAiS1Mgd2l0aCBpZ25pdGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoNCglNZW51OmFkZFN1Yk1lbnUoIlsiLi5teUhlcm8uY2hhck5hbWUuLiJdIC0gRmFybSBTZXR0aW5ncyIsICJGYXJtIikNCgkJTWVudS5GYXJtOmFkZFBhcmFtKCJ1c2VRRmFybSIsICJVc2UgUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJTWVudS5GYXJtOmFkZFBhcmFtKCJ1c2VXRmFybSIsICJVc2UgVyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCg0KCU1lbnU6YWRkU3ViTWVudSgiWyIuLm15SGVyby5jaGFyTmFtZS4uIl0gLSBNaXNjIFNldHRpbmdzIiwgIk1pc2MiKQ0KCQlNZW51Lk1pc2M6YWRkU3ViTWVudSgiWyIuLm15SGVyby5jaGFyTmFtZS4uIl0gLSBXYXJkIEp1bXAgU2V0dGluZ3MiLCAiV2FyZEp1bXAiKSANCgkJCU1lbnUuTWlzYy5XYXJkSnVtcDphZGRQYXJhbSgnd2FyZGp1bXBLZXknLCAnV2FyZCBKdW1wIEtleScsICBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkgiKSkNCgkJCU1lbnUuTWlzYy5XYXJkSnVtcDphZGRQYXJhbSgibWF4anVtcCIsICJBbHdheXMgV2FyZCBKdW1wIGF0IE1heCBSYW5nZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCg0KCS0tIFRhcmdldCBTZWxlY3Rvcg0KCXRzID0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xPV19IUF9QUklPUklUWSwgZVJhbmdlKQ0KCXRzLm5hbWUgPSAiS2F0YXJpbmEiDQoJTWVudTphZGRUUyh0cykNCg0KCS0tIE1pbmlvbnMNCgllbmVteU1pbmlvbnMgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgcVJhbmdlLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQoJYWxseU1pbmlvbnMgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9BTExZLCBlUmFuZ2UsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCg0KCS0tIElnbml0ZSBjaGVjaw0KCWlmIG15SGVybzpHZXRTcGVsbERhdGEoU1VNTU9ORVJfMSkubmFtZTpmaW5kKCJzdW1tb25lcmRvdCIpIHRoZW4NCgkJaWduaXRlID0gU1VNTU9ORVJfMSANCgllbHNlaWYgbXlIZXJvOkdldFNwZWxsRGF0YShTVU1NT05FUl8yKS5uYW1lOmZpbmQoInN1bW1vbmVyZG90IikgdGhlbg0KCQlpZ25pdGUgPSBTVU1NT05FUl8yIA0KCWVuZA0KDQoJd2FyZHNUYWJsZSA9IHt9DQoJZm9yIGkgPSAwLCBvYmpNYW5hZ2VyLm1heE9iamVjdHMgZG8NCgkJbG9jYWwgb2JqID0gb2JqTWFuYWdlcjpnZXRPYmplY3QoaSkNCgkJaWYgb2JqIGFuZCBvYmoudmFsaWQgYW5kIChzdHJpbmcuZmluZChvYmoubmFtZSwgIldhcmQiKSB+PSBuaWwgb3Igc3RyaW5nLmZpbmQob2JqLm5hbWUsICJXcmlnZ2xlIikgfj0gbmlsIG9yIHN0cmluZy5maW5kKG9iai5uYW1lLCAiVHJpbmtldCIpKSB0aGVuDQoJCQl0YWJsZS5pbnNlcnQod2FyZHNUYWJsZSwgb2JqKQ0KCQllbmQNCgllbmQNCg0KCXByaW50KCJDaGFsbGVuZ2VycyBLYXRhcmluYSB2ZXJzaW9uOiAiLi4gdmVyc2lvbiAuLiAiIGxvYWRlZCEiKQ0KZW5kDQoNCmZ1bmN0aW9uIE9uVGljaygpDQoJQ2hlY2tzKCkNCglJZ25pdGVLUygpDQoNCglpZiBNZW51LktleXMuY29tYm9LZXkgdGhlbg0KCQlDb21ibygpDQoJCXJldHVybg0KCWVuZA0KDQoJaWYgTWVudS5LZXlzLmhhcmFzc0tleSB0aGVuDQoJCUhhcmFzcygpDQoJCXJldHVybg0KCWVuZA0KDQoJaWYgTWVudS5LZXlzLmZhcm1LZXkgdGhlbg0KCQlGYXJtKCkNCgllbmQNCg0KCWlmIE1lbnUuTWlzYy5XYXJkSnVtcC53YXJkanVtcEtleSB0aGVuDQogICAgCQlsb2NhbCBXYXJkUG9zID0gKEdldERpc3RhbmNlU3FyKG1vdXNlUG9zKSA8PSA2MDAgKiA2MDAgYW5kIG1vdXNlUG9zKSBvciAoTWVudS5NaXNjLldhcmRKdW1wLm1heGp1bXAgYW5kIG15SGVybyArIChWZWN0b3IobW91c2VQb3MpIC0gbXlIZXJvKTpub3JtYWxpemVkKCkqNTkwKQ0KCQlpZiBXYXJkUG9zIHRoZW4NCgkJCVdhcmRKdW1wKFdhcmRQb3MueCwgV2FyZFBvcy56KQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBDaGVja3MoKQ0KCXRzOnVwZGF0ZSgpDQoJdGFyZ2V0ID0gdHMudGFyZ2V0DQoNCgl1c2luZ1IgPSBHZXRUaWNrQ291bnQoKSA8PSB0aW1lUiArIEdldExhdGVuY3koKSArIDUwIG9yIGFuaW1hdGlvblIgPT0gIlNwZWxsNCINCg0KCVFSRUFEWSA9IChteUhlcm86Q2FuVXNlU3BlbGwoX1EpID09IFJFQURZKQ0KCVdSRUFEWSA9IChteUhlcm86Q2FuVXNlU3BlbGwoX1cpID09IFJFQURZKSANCglFUkVBRFkgPSAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSkNCglSUkVBRFkgPSAobXlIZXJvOkNhblVzZVNwZWxsKF9SKSA9PSBSRUFEWSkNCglJUkVBRFkgPSAoaWduaXRlIH49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGlnbml0ZSkgPT0gUkVBRFkpIA0KZW5kDQoNCmZ1bmN0aW9uIENvbWJvKCkNCglpZiBWYWxpZFRhcmdldCh0YXJnZXQpIHRoZW4NCgkJLS0gVWx0IGJhc2VkIG9uIHVsdE1vZGUNCgkJaWYgTWVudS5Db21iby51bHRpbWF0ZS51bHRNb2RlID09IDEgdGhlbg0KCQkJaWYgUVJFQURZIGFuZCBNZW51LkNvbWJvLnVzZVEgdGhlbiANCgkJCQlpZiBHZXREaXN0YW5jZSh0YXJnZXQpIDw9IHFSYW5nZSB0aGVuDQoJCQkJCUNhc3RTcGVsbChfUSwgdGFyZ2V0KSANCgkJCQllbmQNCgkJCWVuZA0KDQoJCQlpZiBFUkVBRFkgYW5kIE1lbnUuQ29tYm8udXNlRSB0aGVuDQoJCQkJaWYgR2V0RGlzdGFuY2UodGFyZ2V0KSA8PSBlUmFuZ2UgdGhlbg0KCQkJCQlDYXN0U3BlbGwoX0UsIHRhcmdldCkNCgkJCQllbmQNCgkJCWVuZA0KDQoNCgkJCWlmIFdSRUFEWSBhbmQgTWVudS5Db21iby51c2VXIHRoZW4NCgkJCQlpZiBHZXREaXN0YW5jZSh0YXJnZXQpIDw9IHdSYW5nZSB0aGVuDQoJCQkJCUNhc3RTcGVsbChfVykNCgkJCQllbmQNCgkJCWVuZA0KDQoJCQlpZiBSUkVBRFkgYW5kIG5vdCBRUkVBRFkgYW5kIG5vdCBXUkVBRFkgYW5kIG5vdCBFUkVBRFkgYW5kIE1lbnUuQ29tYm8udWx0aW1hdGUudXNlUiB0aGVuDQoJCQkJaWYgR2V0RGlzdGFuY2UodGFyZ2V0KSA8PSByUmFuZ2UgdGhlbg0KCQkJCQl0aW1lUiA9IEdldFRpY2tDb3VudCgpDQoJCQkJCUNhc3RTcGVsbChfUikNCgkJCQllbmQNCgkJCWVuZA0KCQllbHNlaWYgTWVudS5Db21iby51bHRpbWF0ZS51bHRNb2RlID09IDIgdGhlbg0KCQkJaWYgRVJFQURZIGFuZCBNZW51LkNvbWJvLnVzZUUgdGhlbg0KCQkJCWlmIEdldERpc3RhbmNlKHRhcmdldCkgPD0gZVJhbmdlIHRoZW4NCgkJCQkJQ2FzdFNwZWxsKF9FLCB0YXJnZXQpDQoJCQkJZW5kDQoJCQllbmQNCg0KCQkJaWYgUVJFQURZIGFuZCBNZW51LkNvbWJvLnVzZVEgdGhlbiANCgkJCQlpZiBHZXREaXN0YW5jZSh0YXJnZXQpIDw9IHFSYW5nZSB0aGVuDQoJCQkJCUNhc3RTcGVsbChfUSwgdGFyZ2V0KSANCgkJCQllbmQNCgkJCWVuZA0KDQoJCQlpZiBXUkVBRFkgYW5kIE1lbnUuQ29tYm8udXNlVyB0aGVuDQoJCQkJaWYgR2V0RGlzdGFuY2UodGFyZ2V0KSA8PSB3UmFuZ2UgdGhlbg0KCQkJCQlDYXN0U3BlbGwoX1cpDQoJCQkJZW5kDQoJCQllbmQNCg0KCQkJaWYgUlJFQURZIGFuZCBub3QgUVJFQURZIGFuZCBub3QgV1JFQURZIGFuZCBub3QgRVJFQURZIGFuZCBNZW51LkNvbWJvLnVsdGltYXRlLnVzZVIgdGhlbg0KCQkJCWlmIEdldERpc3RhbmNlKHRhcmdldCkgPD0gclJhbmdlIHRoZW4NCgkJCQkJdGltZVIgPSBHZXRUaWNrQ291bnQoKQ0KCQkJCQlDYXN0U3BlbGwoX1IpDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KDQpmdW5jdGlvbiBBdXRvSWduaXRlKGVuZW15KQ0KCWlnbml0ZURNRyA9ICgoSVJFQURZIGFuZCBnZXREbWcoIklHTklURSIsIGVuZW15LCBteUhlcm8pKSBvciAwKQ0KCWlmIGVuZW15LmhlYWx0aCA8PSBpZ25pdGVETUcgYW5kIEdldERpc3RhbmNlKGVuZW15KSA8PSA2MDAgYW5kIGlnbml0ZSB+PSBuaWwgdGhlbg0KCQlpZiBJUkVBRFkgdGhlbg0KCQkJQ2FzdFNwZWxsKGlnbml0ZSwgZW5lbXkpDQoJCWVuZCANCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBJZ25pdGVLUygpDQoJaWYgVmFsaWRUYXJnZXQodGFyZ2V0KSB0aGVuDQoJCWlmIE1lbnUuS1Mua3NXaXRoSWduaXRlIHRoZW4NCgkJCUF1dG9JZ25pdGUodGFyZ2V0KQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBLaWxsU3RlYWwoKQ0KCWZvciBpLCBlbmVteSBpbiBpcGFpcnMoZSkgZG8NCgkJaWYgVmFsaWRUYXJnZXQoZW5lbXkpIGFuZCBHZXREaXN0YW5jZShlbmVteSkgPCA3MDAgdGhlbg0KCQkJaWYgTWVudS5LUy5rc1dpdGhRIHRoZW4NCgkJCQlpZiBRUmVhZHkgYW5kIGdldERtZygiUSIsIGVuZW15LCBteUhlcm8pID4gZW5lbXkuaGVhbHRoIHRoZW4NCgkJCQkJQ2FzdFNwZWxsKF9RLCBlbmVteSkNCgkJCQllbmQNCgkJCWVuZA0KDQoJCQlpZiBNZW51LktTLmtzV2l0aFcgdGhlbg0KCQkJCWlmIFdSZWFkeSBhbmQgZ2V0RG1nKCJXIiwgZW5lbXksIG15SGVybykgPiBlbmVteS5oZWFsdGggdGhlbg0KCQkJCQlDYXN0U3BlbGwoX1cpDQoJCQkJZW5kDQoJCQllbmQNCgkJCQ0KCQkJaWYgTWVudS5LUy5rc1dpdGhFIHRoZW4NCgkJCQlpZiBFUmVhZHkgYW5kIGdldERtZygiRSIsIGVuZW15LCBteUhlcm8pID4gZW5lbXkuaGVhbHRoIHRoZW4NCgkJCQkJQ2FzdFNwZWxsKF9FLCBlbmVteSkNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQoNCmZ1bmN0aW9uIE9uQW5pbWF0aW9uKHVuaXQsIGFuaW1hdGlvbk5hbWUpDQoJaWYgdW5pdC5pc01lIGFuZCBhbmltYXRpb25SIH49IGFuaW1hdGlvbk5hbWUgdGhlbg0KCQlhbmltYXRpb25SID0gYW5pbWF0aW9uTmFtZQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEhhcmFzcygpDQoJaWYgbm90IHRhcmdldCB0aGVuDQoJCXJldHVybg0KCWVuZA0KDQoJaWYgVmFsaWRUYXJnZXQodGFyZ2V0KSB0aGVuDQoJCWlmIEVSRUFEWSBhbmQgTWVudS5IYXJhcy51c2VFSGFyYXNzIHRoZW4NCgkJCWlmIEdldERpc3RhbmNlKHRhcmdldCkgPD0gZVJhbmdlIHRoZW4NCgkJCQlDYXN0U3BlbGwoX0UsIHRhcmdldCkNCgkJCWVuZA0KCQllbmQNCg0KCQlpZiBRUkVBRFkgYW5kIE1lbnUuSGFyYXMudXNlUUhhcmFzcyB0aGVuIA0KCQkJaWYgR2V0RGlzdGFuY2UodGFyZ2V0KSA8PSBxUmFuZ2UgdGhlbg0KCQkJCUNhc3RTcGVsbChfUSwgdGFyZ2V0KSANCgkJCWVuZA0KCQllbmQNCg0KCQlpZiBXUkVBRFkgYW5kIE1lbnUuSGFyYXMudXNlV0hhcmFzcyB0aGVuDQoJCQlpZiBHZXREaXN0YW5jZSh0YXJnZXQpIDw9IHdSYW5nZSB0aGVuDQoJCQkJQ2FzdFNwZWxsKF9XKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEZhcm0oKQ0KCWVuZW15TWluaW9uczp1cGRhdGUoKQ0KCWZvciBpLCBtaW5pb24gaW4gaXBhaXJzKGVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KCQlpZiBNZW51LkZhcm0udXNlUUZhcm0gdGhlbg0KCQkJaWYgVmFsaWRUYXJnZXQobWluaW9uKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBxUmFuZ2UgYW5kIFFSRUFEWSBhbmQgZ2V0RG1nKCJRIiwgbWluaW9uLCBteUhlcm8pID4gbWluaW9uLmhlYWx0aCB0aGVuDQoJCQkJQ2FzdFNwZWxsKF9RLCBtaW5pb24pDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJDQoJZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQoJCWlmIE1lbnUuRmFybS51c2VXRmFybSB0aGVuDQoJCQlpZiBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHdSYW5nZSBhbmQgV1JFQURZIGFuZCBnZXREbWcoIlciLCBtaW5pb24sIG15SGVybykgPiBtaW5pb24uaGVhbHRoIHRoZW4NCgkJCQlDYXN0U3BlbGwoX1cpDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT25DcmVhdGVPYmoob2JqKQ0KCWlmIG9iai52YWxpZCBhbmQgKHN0cmluZy5maW5kKG9iai5uYW1lLCAiV2FyZCIpIH49IG5pbCBvciBzdHJpbmcuZmluZChvYmoubmFtZSwgIldyaWdnbGUiKSB+PSBuaWwgb3Igc3RyaW5nLmZpbmQob2JqLm5hbWUsICJUcmlua2V0IikpIHRoZW4NCgkJdGFibGUuaW5zZXJ0KHdhcmRzVGFibGUsIG9iaikNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPbkRlbGV0ZU9iaihvYmplY3QpDQoJaWYgb2JqIHRoZW4NCgkJZm9yIGksIHdhcmQgaW4gcGFpcnMoc2VsZi53YXJkc1RhYmxlKSBkbw0KCQkJaWYgbm90IHdhcmQudmFsaWQgb3Igb2JqLm5hbWUgPT0gd2FyZC5uYW1lIHRoZW4NCgkJCQl0YWJsZS5yZW1vdmUod2FyZHNUYWJsZSwgaSkNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBXYXJkSnVtcCh4LCB5LCBlbmVteSkNCglpZiBHZXREaXN0YW5jZShtb3VzZVBvcykgYW5kIG5vdCBlbmVteSB0aGVuDQoJCWxvY2FsIG1vdmVUb1BvcyA9IG15SGVybyArIChWZWN0b3IobW91c2VQb3MpIC0gbXlIZXJvKTpub3JtYWxpemVkKCkqMzAwDQoJCW15SGVybzpNb3ZlVG8obW92ZVRvUG9zLngsIG1vdmVUb1Bvcy56KQ0KCWVuZAkNCg0KCWlmIEVSRUFEWSB0aGVuDQoJCWxvY2FsIEp1bXBlZCA9IGZhbHNlDQoJCWxvY2FsIFdhcmREaXN0YW5jZSA9IDMwMA0KDQoJCS0tQWxseSBqdW1wDQoJCWZvciBpLCBhbGx5IGluIGlwYWlycyhHZXRBbGx5SGVyb2VzKCkpIGRvDQoJCQlpZiBWYWxpZFRhcmdldChhbGx5LCBlUmFuZ2UsIGZhbHNlKSB0aGVuDQoJCQkJaWYgR2V0RGlzdGFuY2VTcXIoYWxseSwgbW91c2VQb3MpIDw9IFdhcmREaXN0YW5jZSpXYXJkRGlzdGFuY2UgdGhlbg0KCQkJCQlDYXN0U3BlbGwoX0UsIGFsbHkpDQoJCQkJCUp1bXBlZCA9IHRydWUNCgkJCQkJbGFzdEp1bXAgPSBHZXRUaWNrQ291bnQoKSArIDIwMDANCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCg0KCQktLSBNaW5pb25zIGp1bXANCgkJYWxseU1pbmlvbnM6dXBkYXRlKCkNCgkJZm9yIGksIG1pbmlvbiBpbiBwYWlycyhhbGx5TWluaW9ucy5vYmplY3RzKSBkbw0KCQkJaWYgVmFsaWRUYXJnZXQobWluaW9uLCBlUmFuZ2UsIGZhbHNlKSB0aGVuDQoJCQkJaWYgR2V0RGlzdGFuY2VTcXIobWluaW9uLCBtb3VzZVBvcykgPD0gV2FyZERpc3RhbmNlKldhcmREaXN0YW5jZSB0aGVuDQoJCQkJCUNhc3RTcGVsbChfRSwgbWluaW9uKQ0KCQkJCQlKdW1wZWQgPSB0cnVlDQoJCQkJCWxhc3RKdW1wID0gR2V0VGlja0NvdW50KCkgKyAyMDAwDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoNCgkJLS0gV2FyZCBKdW1wDQoJCWZvciBpLCBteVdhcmQgaW4gcGFpcnMod2FyZHNUYWJsZSkgZG8NCgkJCWlmIEdldERpc3RhbmNlU3FyKG1vdXNlUG9zKSA8IDYwMCAqIDYwMCB0aGVuDQoJCQkJaWYgR2V0RGlzdGFuY2VTcXIobXlXYXJkLCBtb3VzZVBvcykgPCBXYXJkRGlzdGFuY2UqV2FyZERpc3RhbmNlIHRoZW4NCgkJCQkJQ2FzdFNwZWxsKF9FLCBteVdhcmQpDQoJCQkJCUp1bXBlZCA9IHRydWUNCgkJCQkJbGFzdEp1bXAgPSBHZXRUaWNrQ291bnQoKSArIDIwMDANCgkJCQllbmQNCgkJCWVsc2UNCgkJCQlpZiBHZXREaXN0YW5jZVNxcihteVdhcmQpIDwgZVJhbmdlICogZVJhbmdlIHRoZW4NCgkJCQkJQ2FzdFNwZWxsKF9FLCBteVdhcmQpDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoNCgkJaWYgbm90IEp1bXBlZCBhbmQgR2V0VGlja0NvdW50KCkgPj0gbGFzdEp1bXAgdGhlbg0KCQkJbG9jYWwgU2xvdCA9IEdldFdhcmRTbG90KCkNCgkJCWlmIFNsb3Qgfj0gbmlsIHRoZW4NCgkJCQlDYXN0U3BlbGwoU2xvdCwgeCwgeSkNCgkJCQlKdW1wZWQgPSB0cnVlDQoJCQkJbGFzdEp1bXAgPSBHZXRUaWNrQ291bnQoKSArIDIwMDANCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBHZXRXYXJkU2xvdCgpDQoJCS0tIEdldHMgU2xvdCBvZiBBdmFpbGFibGUgV2FyZHMgLS0NCgkJbG9jYWwgZnVuY3Rpb24gZ2V0UmVhZHlTbG90KGl0ZW1OYW1lKQ0KCQkJZm9yIHNsb3QgPSA2LCAxMiBkbw0KCQkJCWlmIHN0cmluZy5sb3dlcihteUhlcm86R2V0U3BlbGxEYXRhKHNsb3QpLm5hbWUpID09IGl0ZW1OYW1lIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoc2xvdCkgdGhlbg0KCQkJCQlyZXR1cm4gc2xvdA0KCQkJCWVuZA0KCQkJZW5kDQoJCQlyZXR1cm4gbmlsDQoJCWVuZA0KCQktLSBXYXJkIFByaW9yaXRpZXMgLS0NCgkJaWYgZ2V0UmVhZHlTbG90KHdhcmRzLlRyaW5rZXQxKSB+PSBuaWwgdGhlbg0KCQkJcmV0dXJuIGdldFJlYWR5U2xvdCh3YXJkcy5Ucmlua2V0MSkNCgkJZWxzZWlmIGdldFJlYWR5U2xvdCh3YXJkcy5Ucmlua2V0Mikgfj0gbmlsIHRoZW4NCgkJCXJldHVybiBnZXRSZWFkeVNsb3Qod2FyZHMuVHJpbmtldDIpDQoJCWVsc2VpZiBnZXRSZWFkeVNsb3Qod2FyZHMuVHJpbmtldDMpIH49IG5pbCB0aGVuDQoJCQlyZXR1cm4gZ2V0UmVhZHlTbG90KHdhcmRzLlRyaW5rZXQzKQ0KCQllbHNlaWYgZ2V0UmVhZHlTbG90KHdhcmRzLlRyaW5rZXQ0KSB+PSBuaWwgdGhlbg0KCQkJcmV0dXJuIGdldFJlYWR5U2xvdCh3YXJkcy5Ucmlua2V0NCkNCgkJZWxzZWlmIGdldFJlYWR5U2xvdCh3YXJkcy5TaWdodFdhcmQpIH49IG5pbCB0aGVuDQoJCQlyZXR1cm4gZ2V0UmVhZHlTbG90KHdhcmRzLlNpZ2h0V2FyZCkNCgkJZWxzZWlmIGdldFJlYWR5U2xvdCh3YXJkcy5WaXNpb25XYXJkKSB+PSBuaWwgdGhlbg0KCQkJcmV0dXJuIGdldFJlYWR5U2xvdCh3YXJkcy5WaXNpb25XYXJkKQ0KCQllbHNlaWYgZ2V0UmVhZHlTbG90KHdhcmRzLlNpZ2h0U3RvbmUpIH49IG5pbCB0aGVuDQoJCQlyZXR1cm4gZ2V0UmVhZHlTbG90KHdhcmRzLlNpZ2h0U3RvbmUpDQoJCWVuZA0KCQlyZXR1cm4gbmlsDQoJZW5k"), nil, "bt", _ENV))()

-- For secure copy/paste